\documentclass[draft]{article}
\usepackage{fontspec}
% \usepackage{lmodern}
% \usepackage[T1]{fontenc}
\usepackage{luatexbase}
% \usepackage{luatex85}
\usepackage[paperwidth=220pt,margin=2em,paperheight=400pt]{geometry}
%\usepackage[rivers]{impnattypo}
\usepackage{linebreaker}
\linebreakersetup{debug=true, maxtolerance=90,maxemergencystretch=1em,maxcycles=4}
\usepackage{microtype}
%\input luatexbase.sty

\begin{document}
% \hsize=10em
The example document given below creates two pages by using Lua code alone. You
will learn how to access TeX's boxes and counters from the Lua side, shipout a
page into the PDF file, create horizontal and vertical boxes (hbox and vbox),
create new nodes and manipulate the nodes links structure. The example covers
the following node types: rule, whatsit, vlist, hlist and action.

In the example code we use black squares as the contents of the pages and not
normal text, because character handling takes more code and will be covered
later on.

Save the following file into myprogram.lua and use the TeX stub from above (or
get the source here). 

Small paragraph.

\end{document}
